<!---TODO: Sid --->
<!doctype html>
<html lang="en">
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
    <link rel="stylesheet" type="text/css" href="CROPS.css">

    <title>FarmerLink</title>
  </head>
  <body>
    <header class="p-3 bg-dark text-black" id = "main-header">
        <div class="container">
          <div class="d-flex flex-wrap align-items-center justify-content-center justify-content-lg-start">
            <ul class="nav col-12 col-lg-auto me-lg-auto mb-2 justify-content-center mb-md-0">
              <h3 id = "main-heading">FarmerLink</h1>
              <li><a href="landing.html" class="nav-link px-2 text-white">Home</a></li>
              <li><a href="crops.html" class="nav-link px-2 text-white">Crops</a></li>
              <li><a href="listings.html" class="nav-link px-2 text-white">Listings</a></li>
              <li><a href="forum.html" class="nav-link px-2 text-white">Forum</a></li>
            </ul>
    
            <div class="text-end">
                 <a href="userPage.html" button type="button" class="btn btn-light" id = "profile-button">My Profile</a>
            </div>
          </div>
        </div>
      </header>

      
      <div class="container-fluid" id = "main-page-name">
        <h2 id = "main-page-heading">Crops</h1>
      </div>

      <!-- Add your html inside here --> 

      <div class="container">
        <div class="row">
          <div class="col-sm" id = "menu-heading">
            <h3>Input ZIP</h3>
            <input type = "text" id = "zip" placeholder= "95035"></input>
            <br>
            <br>
            <h3>Region</h3>
            <input type = "text" id = "region" placeholder= "Milpitas, CA"></input>
            <br>
            <br>
            <h3>Relevant Weather Data</h3>
            <input type = "text" id = "weather-box"placeholder= "Partly cloudy skies this evening will give way to cloudy skies and rain overnight. Low 61F. Winds SSE at 10 to 15 mph. Chance of rain 100%" readonly></input>
            <br>
            <br>
            <h3>Relevant Crop Data</h3>
            <input type = "text" id = "crop-box" placeholder= "If you are looking to grow cool weather vegetables, such as beets, carrots, cabbage, cauliflower, peas, potatoes, celery, and such, try planting in early spring." readonly></input>
            <br>
            <br>
            <button type="button" class="btn btn-secondary btn-lg" id = "get-data" onclick = "getData()">Get Data</button>
          </div>
        </div>
      </div>

      <footer class="footer mt-auto py-3 bg-dark" id = "main-footer">   
        <div class="text-center p-3" id = "about-footer">
            <ul class="nav col-12 col-lg-auto me-lg-auto mb-2 justify-content-center mb-md-0">
                <li><a href="#" class="nav-link px-2 text-white" id = "footer-text">About</a></li>
            </ul>
          </div>
      </footer>

      <script type = "text/javascript">
        async function getData() {
          let zipCode = document.getElementById("zip").value;
          let region = document.getElementById("region").value;
          let dataObj = {"zip": zipCode, "region": region};
          const res = await fetch("http://localhost:3000/crops/getCropWeatherData", {
            method: 'POST',
            mode: 'cors',
            headers: {
              'Content-Type': 'application/json'
            },
            body: JSON.stringify(dataObj)
          });
          const allData = await res.json(); 
          document.getElementById("weather-box").value = allData.weatherData;
          document.getElementById("crop-box").value = allData.cropData;
        }
      </script>
  </body>
</html>
